on:
  pull_request:

jobs:
  ready-for-review:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      checks: write
      pull-requests: write
      actions: read
    steps:
    - uses: actions/github-script@v6
      with:
        github-token: ${{ secrets.GITHUB_TOKEN }}
        script: |
          const query = `
            mutation($id: ID!) {
              markPullRequestReadyForReview(input: { pullRequestId: $id }) {
                pullRequest {
                  id
                }
              }
            }
          `;
          const variables = {
            id: context.payload.pull_request.node_id
          }
          const result = await github.graphql(query, variables)
          console.log(result)
